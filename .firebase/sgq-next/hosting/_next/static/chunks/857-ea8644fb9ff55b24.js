"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[857],{3857:function(e,a,t){t.r(a),t.d(a,{default:function(){return I}});var s=t(7437),r=t(2265),i=t(4033),n=t(5925),l=t(9178),o=t(5111),d=t(9874),c=t(7323),m=t(4271),x=t(7965),h=t(9863),g=t(5290),u=t(5518),f=t(9115),p=t(4810);let v=(0,f.U)()((0,p.tJ)(e=>({sidebarOpen:!0,theme:"light",language:"pt",notifications:[],setSidebarOpen:a=>e({sidebarOpen:a}),toggleSidebar:()=>e(e=>({sidebarOpen:!e.sidebarOpen})),setTheme:a=>e({theme:a}),toggleTheme:()=>e(e=>({theme:"light"===e.theme?"dark":"light"})),setLanguage:a=>e({language:a}),addNotification:a=>e(e=>({notifications:[{...a,id:Math.random().toString(36).substr(2,9),createdAt:new Date,read:!1},...e.notifications].slice(0,100)})),markNotificationAsRead:a=>e(e=>({notifications:e.notifications.map(e=>e.id===a?{...e,read:!0}:e)})),clearNotifications:()=>e({notifications:[]})}),{name:"app-state",skipHydration:!0})),y=(0,f.U)(e=>({user:null,isAuthenticated:!1,isLoading:!0,error:null,login:async(a,t)=>{e({isLoading:!0,error:null});try{let s=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a,password:t})});if(!s.ok)throw Error("Invalid credentials");let r=await s.json();e({user:r,isAuthenticated:!0,isLoading:!1})}catch(a){e({error:a.message,isLoading:!1})}},logout:async()=>{e({isLoading:!0});try{await fetch("/api/auth/logout",{method:"POST"}),e({user:null,isAuthenticated:!1,isLoading:!1})}catch(a){e({error:a.message,isLoading:!1})}},updateUser:a=>{e(e=>({user:e.user?{...e.user,...a}:null}))}}));var j=e=>{let{onMenuClick:a}=e,{theme:t,setTheme:i,notifications:n,markNotificationAsRead:f}=v(),{user:p,logout:j}=y(),b=n.filter(e=>!e.read);return(0,s.jsx)("header",{className:"bg-white dark:bg-gray-800 shadow-sm",children:(0,s.jsxs)("div",{className:"flex justify-between items-center px-4 py-4",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("button",{onClick:a,className:"lg:hidden p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-700",children:(0,s.jsx)(d.Z,{className:"h-6 w-6"})}),(0,s.jsx)("h1",{className:"ml-2 text-xl font-semibold text-gray-900 dark:text-white",children:"Sistema de Gest\xe3o da Qualidade"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)("button",{onClick:()=>i("dark"===t?"light":"dark"),className:"p-2 rounded-full text-gray-400 hover:text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-700",children:"dark"===t?(0,s.jsx)(c.Z,{className:"h-6 w-6"}):(0,s.jsx)(m.Z,{className:"h-6 w-6"})}),(0,s.jsxs)(l.v2,{as:"div",className:"relative",children:[(0,s.jsxs)(l.v2.Button,{className:"p-2 rounded-full text-gray-400 hover:text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-700",children:[(0,s.jsx)("span",{className:"sr-only",children:"Ver notifica\xe7\xf5es"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(x.Z,{className:"h-6 w-6"}),b.length>0&&(0,s.jsx)("span",{className:"absolute -top-1 -right-1 h-4 w-4 rounded-full bg-red-500 flex items-center justify-center text-xs text-white",children:b.length})]})]}),(0,s.jsx)(o.u,{as:r.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:(0,s.jsx)(l.v2.Items,{className:"absolute right-0 mt-2 w-80 origin-top-right rounded-md bg-white dark:bg-gray-700 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none",children:(0,s.jsx)("div",{className:"py-1",children:0===n.length?(0,s.jsx)("div",{className:"px-4 py-2 text-sm text-gray-500 dark:text-gray-400",children:"Nenhuma notifica\xe7\xe3o"}):n.map(e=>(0,s.jsx)(l.v2.Item,{children:a=>{let{active:t}=a;return(0,s.jsxs)("button",{onClick:()=>f(e.id),className:"".concat(t?"bg-gray-100 dark:bg-gray-600":e.read?"bg-white dark:bg-gray-700":"bg-blue-50 dark:bg-blue-900"," w-full text-left px-4 py-2 text-sm"),children:[(0,s.jsx)("p",{className:"".concat(e.read?"text-gray-700 dark:text-gray-300":"text-gray-900 dark:text-white font-medium"),children:e.message}),(0,s.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:new Date(e.createdAt).toLocaleString()})]})}},e.id))})})})]}),(0,s.jsxs)(l.v2,{as:"div",className:"relative",children:[(0,s.jsxs)(l.v2.Button,{className:"flex items-center space-x-3 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full p-2",children:[(null==p?void 0:p.avatar)?(0,s.jsx)("img",{className:"h-8 w-8 rounded-full",src:p.avatar,alt:p.name}):(0,s.jsx)(h.Z,{className:"h-8 w-8 text-gray-400"}),(0,s.jsx)("span",{className:"hidden md:block text-sm font-medium text-gray-700 dark:text-gray-300",children:(null==p?void 0:p.name)||"Usu\xe1rio"})]}),(0,s.jsx)(o.u,{as:r.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:(0,s.jsx)(l.v2.Items,{className:"absolute right-0 mt-2 w-48 origin-top-right rounded-md bg-white dark:bg-gray-700 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none",children:(0,s.jsxs)("div",{className:"py-1",children:[(0,s.jsx)(l.v2.Item,{children:e=>{let{active:a}=e;return(0,s.jsxs)("a",{href:"/profile",className:"".concat(a?"bg-gray-100 dark:bg-gray-600":""," flex items-center px-4 py-2 text-sm text-gray-700 dark:text-gray-300"),children:[(0,s.jsx)(h.Z,{className:"h-5 w-5 mr-3"}),"Perfil"]})}}),(0,s.jsx)(l.v2.Item,{children:e=>{let{active:a}=e;return(0,s.jsxs)("a",{href:"/settings",className:"".concat(a?"bg-gray-100 dark:bg-gray-600":""," flex items-center px-4 py-2 text-sm text-gray-700 dark:text-gray-300"),children:[(0,s.jsx)(g.Z,{className:"h-5 w-5 mr-3"}),"Configura\xe7\xf5es"]})}}),(0,s.jsx)(l.v2.Item,{children:e=>{let{active:a}=e;return(0,s.jsxs)("button",{onClick:j,className:"".concat(a?"bg-gray-100 dark:bg-gray-600":""," flex items-center w-full px-4 py-2 text-sm text-gray-700 dark:text-gray-300"),children:[(0,s.jsx)(u.Z,{className:"h-5 w-5 mr-3"}),"Sair"]})}})]})})})]})]})]})})},b=t(1396),N=t.n(b),w=t(4992),k=t(6610),Z=t(887),C=t(8294),L=t(7548),A=t(9649),E=t(9267),S=t(654),T=t(2361);let O=[{name:"Dashboard",href:"/dashboard",icon:w.Z},{name:"Documentos",href:"/documentos",icon:k.Z,badge:"12",badgeColor:"bg-blue-100 text-blue-800"},{name:"N\xe3o Conformidades",href:"/nao-conformidades",icon:Z.Z,badge:"3",badgeColor:"bg-red-100 text-red-800"},{name:"Ensaios",href:"/ensaios",icon:C.Z},{name:"Auditorias",href:"/auditorias",icon:L.Z},{name:"Equipe",href:"/equipe",icon:A.Z},{name:"Departamentos",href:"/departamentos",icon:E.Z},{name:"Relat\xf3rios",href:"/relatorios",icon:S.Z},{name:"Pesquisa",href:"/pesquisa",icon:T.Z},{name:"Configura\xe7\xf5es",href:"/configuracoes",icon:g.Z}];var F=()=>{var e;let a=(0,i.usePathname)(),{sidebarOpen:t}=v(),{user:r}=y(),n=O.filter(e=>"/configuracoes"!==e.href||(null==r?void 0:r.role)==="admin");return(0,s.jsx)("div",{className:"".concat(t?"translate-x-0":"-translate-x-full"," fixed inset-y-0 left-0 z-30 w-64 bg-indigo-700 transition-transform duration-300 ease-in-out lg:translate-x-0 lg:static lg:inset-0"),children:(0,s.jsxs)("div",{className:"flex flex-col h-full",children:[(0,s.jsx)("div",{className:"flex items-center justify-center h-16 flex-shrink-0 px-4 bg-indigo-800",children:(0,s.jsx)("span",{className:"text-xl font-bold text-white",children:"SGQ NEXT"})}),(0,s.jsx)("nav",{className:"flex-1 px-2 py-4 space-y-1 overflow-y-auto",children:n.map(e=>{let t=a===e.href;return(0,s.jsxs)(N(),{href:e.href,className:"group flex items-center justify-between px-2 py-2 text-sm font-medium rounded-md transition-colors duration-150 ".concat(t?"bg-indigo-800 text-white":"text-indigo-100 hover:bg-indigo-600"),children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(e.icon,{className:"mr-3 flex-shrink-0 h-6 w-6 ".concat(t?"text-white":"text-indigo-300"),"aria-hidden":"true"}),e.name]}),e.badge&&(0,s.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(e.badgeColor),children:e.badge})]},e.name)})}),(0,s.jsx)("div",{className:"flex-shrink-0 flex border-t border-indigo-800 p-4",children:(0,s.jsxs)("div",{className:"flex items-center w-full",children:[(0,s.jsx)("div",{className:"flex-shrink-0",children:(null==r?void 0:r.avatar)?(0,s.jsx)("img",{className:"h-8 w-8 rounded-full",src:r.avatar,alt:r.name}):(0,s.jsx)("div",{className:"h-8 w-8 rounded-full bg-indigo-600 flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-white text-sm font-medium",children:(null==r?void 0:null===(e=r.name)||void 0===e?void 0:e.charAt(0))||"U"})})}),(0,s.jsxs)("div",{className:"ml-3",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-white",children:null==r?void 0:r.name}),(0,s.jsx)("p",{className:"text-xs text-indigo-300",children:null==r?void 0:r.email})]})]})})]})})},I=e=>{var a,t,l,o,d,c,m;let{children:x}=e,h=(0,i.usePathname)(),{sidebarOpen:g,setSidebarOpen:u,theme:f}=v(),{isAuthenticated:p,user:b}=y();return((0,r.useEffect)(()=>{window.innerWidth<768&&u(!1)},[h,u]),(0,r.useEffect)(()=>{"dark"===f?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[f]),p)?(0,s.jsxs)("div",{className:"min-h-screen ".concat("dark"===f?"dark":""),children:[(0,s.jsx)(n.x7,{position:"top-right"}),(0,s.jsx)("div",{className:"fixed inset-0 bg-gray-800 bg-opacity-50 z-20 lg:hidden transition-opacity duration-200 ".concat(g?"opacity-100":"opacity-0 pointer-events-none"),onClick:()=>u(!1)}),(0,s.jsxs)("div",{className:"flex h-screen overflow-hidden",children:[(0,s.jsx)(F,{}),(0,s.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,s.jsx)(j,{}),(0,s.jsx)("main",{className:"flex-1 overflow-x-hidden overflow-y-auto bg-gray-100 dark:bg-gray-900",children:(0,s.jsxs)("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,s.jsx)("div",{className:"mb-6",children:(0,s.jsx)("nav",{className:"text-gray-500 dark:text-gray-400","aria-label":"Breadcrumb",children:(0,s.jsxs)("ol",{className:"list-none p-0 inline-flex",children:[(0,s.jsxs)("li",{className:"flex items-center",children:[(0,s.jsx)("span",{children:"Dashboard"}),(0,s.jsx)("svg",{className:"fill-current w-3 h-3 mx-3",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512",children:(0,s.jsx)("path",{d:"M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"})})]}),(0,s.jsx)("li",{children:(0,s.jsx)("span",{className:"text-gray-900 dark:text-white font-medium",children:null!==(m=null==h?void 0:null===(l=h.split("/"))||void 0===l?void 0:null===(t=l.pop())||void 0===t?void 0:null===(a=t.charAt(0))||void 0===a?void 0:a.toUpperCase())&&void 0!==m?m:""+(null!==(c=null==h?void 0:null===(d=h.split("/"))||void 0===d?void 0:null===(o=d.pop())||void 0===o?void 0:o.slice(1))&&void 0!==c?c:"")})})]})})}),x]})})]})]})]}):(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("h1",{className:"text-2xl font-semibold text-gray-900",children:"Acesso Negado"}),(0,s.jsx)("p",{className:"mt-2 text-gray-600",children:"Fa\xe7a login para acessar esta p\xe1gina"})]})})}}}]);